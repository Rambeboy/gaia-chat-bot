const _0x4f8465=_0x9855;(function(_0x249279,_0x38a485){const _0xa79200=_0x9855,_0x3c189b=_0x249279();while(!![]){try{const _0x4d9cc2=-parseInt(_0xa79200(0xa5))/0x1+-parseInt(_0xa79200(0x8b))/0x2*(parseInt(_0xa79200(0x93))/0x3)+-parseInt(_0xa79200(0xac))/0x4+parseInt(_0xa79200(0x94))/0x5*(parseInt(_0xa79200(0xa1))/0x6)+-parseInt(_0xa79200(0x98))/0x7+parseInt(_0xa79200(0x7e))/0x8+parseInt(_0xa79200(0xa9))/0x9;if(_0x4d9cc2===_0x38a485)break;else _0x3c189b['push'](_0x3c189b['shift']());}catch(_0x485673){_0x3c189b['push'](_0x3c189b['shift']());}}}(_0x3898,0xd2e5f));import{API}from'./api/api.js';import _0x537600 from'../utils/logger.js';function _0x9855(_0x5e19a2,_0x98cda9){const _0x389866=_0x3898();return _0x9855=function(_0x98555d,_0xc2dfb7){_0x98555d=_0x98555d-0x67;let _0x150784=_0x389866[_0x98555d];return _0x150784;},_0x9855(_0x5e19a2,_0x98cda9);}import{Config}from'../../../config/config.js';import{ethers}from'ethers';function _0x3898(){const _0x364a28=['system','\x0a\x20\x20ThroughPut\x20:\x20','connectGaia','api_key','assistant','9122864WubGOu','Connecting\x20to\x20wallet\x20address\x20using\x20provided\x20Private\x20Key','stringify','Message\x20:\x20','Wallet','-\x20Node\x20URL\x20:\x20','\x0a\x20\x20Status\x20:\x20','now','access_token','GET','Sending\x20Chat\x20to\x20','\x0a\x20-\x20API\x20KEY\x20:\x20','connectWallet','575630saYrDc','push','subdomain','throughputs','https://','https://api.gaianet.ai/api/v1/users/connect-wallet/','data','POST','3xUDnuH','1614705tdYzNm','apiKey','address','wallet','658238jwitwx','Getting\x20Node\x20List\x20Of\x20Current\x20Account','userId','choices','/v1/chat/completions','You\x20are\x20a\x20tour\x20guide\x20in\x20Paris,\x20France.\x20Please\x20answer\x20the\x20question\x20from\x20a\x20Paris\x20visitor\x20accurately.','PRIVATEKEY','map','currentChat','6raYyGv','message','content','info','1519160SOoIgM','random','trim','Starting\x20New\x20Chat\x20Session\x20for\x20Node\x20','24324975fMTpSs','continueSession','\x20to\x20response\x0a','5604904TEKjFV','provider','nodes','https://base.llamarpc.com','\x20:\x20','Qwen2-0.5B-Instruct-Q5_K_M','Bearer\x20','Response\x20from\x20','Waiting\x20for\x20','JsonRpcProvider','fetch','Wallet\x20connected\x20','objects','user','https://api.gaianet.ai/api/v1/users/nodes/','parse','Invalid\x20Private\x20Key,\x20Check\x20your\x20config.js,\x20make\x20sure\x20you\x20use\x20EVM\x20Private\x20Key','token','messages'];_0x3898=function(){return _0x364a28;};return _0x3898();}import{questionList}from'./question_list.js';import{Helper}from'../utils/helper.js';export default class Core extends API{constructor(_0x8fe2db){const _0x2ec78c=_0x9855;super(_0x8fe2db),this[_0x2ec78c(0x67)]=new ethers[(_0x2ec78c(0x6f))](_0x2ec78c(0x69),0x2105);}async[_0x4f8465(0x8a)](){const _0x470347=_0x4f8465;try{_0x537600[_0x470347(0xa4)](_0x470347(0x7f)),this['wallet']=new ethers[(_0x470347(0x82))](Config[_0x470347(0x9e)][_0x470347(0xa7)](),this['provider']);if(!this['wallet'])throw Error(_0x470347(0x76));this['address']=this[_0x470347(0x97)][_0x470347(0x96)],_0x537600[_0x470347(0xa4)](_0x470347(0x71)+JSON[_0x470347(0x80)](this[_0x470347(0x96)])+'\x0a');}catch(_0x30755f){throw _0x30755f;}}async[_0x4f8465(0x7b)](){const _0x15c75a=_0x4f8465;try{_0x537600[_0x15c75a(0xa4)]('Connecting\x20to\x20Gaia\x20Net');const _0x4fe4f5=JSON['stringify']({'wallet_address':this[_0x15c75a(0x96)],'timestamp':Date[_0x15c75a(0x85)]()}),_0x4315c9=await this[_0x15c75a(0x97)]['signMessage'](_0x4fe4f5),_0x451c33=await this[_0x15c75a(0x70)](_0x15c75a(0x90),_0x15c75a(0x92),undefined,{'signature':_0x4315c9,'message':JSON[_0x15c75a(0x75)](_0x4fe4f5)});this[_0x15c75a(0x9a)]=_0x451c33[_0x15c75a(0x91)]['user_id'],this[_0x15c75a(0x77)]=_0x451c33[_0x15c75a(0x91)][_0x15c75a(0x86)],this[_0x15c75a(0x95)]=_0x451c33[_0x15c75a(0x91)][_0x15c75a(0x7c)],_0x537600[_0x15c75a(0xa4)]('Connected\x20to\x20Gaia\x20Net\x0a\x20-\x20User\x20ID\x20:\x20'+this[_0x15c75a(0x9a)]+_0x15c75a(0x89)+this[_0x15c75a(0x95)]+'\x0a\x20');}catch(_0x564447){throw _0x564447;}}async['getNodes'](){const _0x525386=_0x4f8465;try{_0x537600[_0x525386(0xa4)](_0x525386(0x99));const _0x4618e3=await this[_0x525386(0x70)](_0x525386(0x74),_0x525386(0x87),this[_0x525386(0x77)]);this[_0x525386(0x68)]=_0x4618e3[_0x525386(0x91)][_0x525386(0x72)],_0x537600[_0x525386(0xa4)]('User\x20Nodes\x20List\x20:'),this[_0x525386(0x68)][_0x525386(0x9f)](_0x4508fb=>{const _0x582100=_0x525386;return _0x537600[_0x582100(0xa4)](_0x582100(0x83)+_0x4508fb[_0x582100(0x8d)]+_0x582100(0x84)+_0x4508fb['status']+_0x582100(0x7a)+_0x4508fb[_0x582100(0x8e)]+'\x0a');});}catch(_0x350748){throw _0x350748;}}async['startSession'](_0x1c3f41){const _0x4cf97a=_0x4f8465;try{_0x537600[_0x4cf97a(0xa4)](_0x4cf97a(0xa8)+_0x1c3f41[_0x4cf97a(0x8d)]);const _0x271b86=questionList[Helper[_0x4cf97a(0xa6)](0x0,questionList['length']-0x1)];this[_0x4cf97a(0xa0)]={'model':_0x4cf97a(0x6b),'messages':[{'role':_0x4cf97a(0x79),'content':_0x4cf97a(0x9d)},{'role':'user','content':_0x271b86}],'stream':![],'user':this[_0x4cf97a(0x9a)]},_0x537600[_0x4cf97a(0xa4)](_0x4cf97a(0x88)+_0x1c3f41[_0x4cf97a(0x8d)]),_0x537600[_0x4cf97a(0xa4)](_0x4cf97a(0x81)+_0x271b86),_0x537600[_0x4cf97a(0xa4)](_0x4cf97a(0x6e)+_0x1c3f41[_0x4cf97a(0x8d)]+'\x20to\x20response\x0a');const _0x7d6b00=await this[_0x4cf97a(0x70)](_0x4cf97a(0x8f)+_0x1c3f41[_0x4cf97a(0x8d)]+'/v1/chat/completions',_0x4cf97a(0x92),_0x4cf97a(0x6c)+this[_0x4cf97a(0x95)],this[_0x4cf97a(0xa0)]);_0x537600['info'](_0x4cf97a(0x6d)+_0x1c3f41[_0x4cf97a(0x8d)]+'\x20:\x20'+_0x7d6b00[_0x4cf97a(0x9b)][0x0][_0x4cf97a(0xa2)][_0x4cf97a(0xa3)]+'\x0a'),this[_0x4cf97a(0xa0)][_0x4cf97a(0x78)]['push']({'content':_0x7d6b00[_0x4cf97a(0x9b)][0x0][_0x4cf97a(0xa2)][_0x4cf97a(0xa3)],'role':_0x4cf97a(0x7d)});}catch(_0xe2d151){throw _0xe2d151;}}async[_0x4f8465(0xaa)](_0x49ba4d,_0x4d75bf){const _0x2a9155=_0x4f8465;try{_0x537600[_0x2a9155(0xa4)](_0x2a9155(0x88)+_0x49ba4d[_0x2a9155(0x8d)]),_0x537600['info']('Message\x20:\x20'+_0x4d75bf),this[_0x2a9155(0xa0)][_0x2a9155(0x78)]['push']({'content':_0x4d75bf,'role':_0x2a9155(0x73)}),_0x537600[_0x2a9155(0xa4)](_0x2a9155(0x6e)+_0x49ba4d[_0x2a9155(0x8d)]+_0x2a9155(0xab));const _0x5db524=await this['fetch']('https://'+_0x49ba4d['subdomain']+_0x2a9155(0x9c),_0x2a9155(0x92),_0x2a9155(0x6c)+this[_0x2a9155(0x95)],this['currentChat']);_0x537600['info']('Response\x20from\x20'+_0x49ba4d[_0x2a9155(0x8d)]+_0x2a9155(0x6a)+_0x5db524[_0x2a9155(0x9b)][0x0][_0x2a9155(0xa2)][_0x2a9155(0xa3)]),this[_0x2a9155(0xa0)][_0x2a9155(0x78)][_0x2a9155(0x8c)]({'content':_0x5db524[_0x2a9155(0x9b)][0x0][_0x2a9155(0xa2)][_0x2a9155(0xa3)],'role':'assistant'});}catch(_0x19efe8){throw _0x19efe8;}}}
